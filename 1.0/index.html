<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Guardtime Parameter and Task Handling SDK libparamset: PARAM SET Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Guardtime Parameter and Task Handling SDK libparamset
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">PARAM SET Overview </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <code>libparamset</code> is a software development kit, written in plain C, for handling command-line parameters and program tasks. Parameters can be read from command line and a task can be extracted that matches with the given input. Process is covered with error detection and functions that generates helpful feedback messages to the user.</p>
<h2>libparamset</h2>
<p>The <code>libparamset</code> provides the following functionality:</p><ul>
<li>Works on Linux and Windows.</li>
<li>Parameters can be parsed from command line, read from configuration file or inserted from the code.</li>
<li>Short and long parameters (<code>-a</code> and <code>--long</code>).</li>
<li>Concatenating of flags with length <code>1</code> (<code>-ab</code> instead of <code>-a -b</code>).</li>
<li>One alias for the parameter name (e.g. <code>--load</code> and <code>-l</code> or <code>--version</code> and <code>--VERSION</code>).</li>
<li>Individual parsing options for parameters:<ul>
<li>Parameter with multiple coexisting values (<code>-a v1 -a v2 ... -a vn</code>, where <code>-a = {v1, v2, ..., vn}</code>).</li>
<li>Parameter that never takes a value (<code>-a v1 -a -a</code>, where <code>-a = {NULL, NULL, NULL}</code> and <code>v1</code> is unknown token).</li>
<li>Parameter that always takes a value (<code>-a -a</code>, where <code>-a = {-a}</code>).</li>
<li>Existing parameter break that takes next token as it's value only if it's not an existing parameter.</li>
<li>Possible parameter break that takes next token as it's value only if it does not look like possible parameter (<code>-a v1 -a -b</code>, where <code>-a = {v1, NULL}</code>).</li>
<li>Parameter value sequence with (existing or possible) parameter break (<code>-a v1 v2 ... vn -b</code>, where <code>-a = {v1, v2, ..., vn}</code>).</li>
<li>Parameter that is hidden from the command line but can be inserted from the code or configuration file.</li>
<li>Parameter that does not generate any typo errors (useful when hiding a parameter from command line).</li>
<li>Value collectors:<ul>
<li>Parameter <code>--</code>, that will redirect every next token to a specified parameter(s).</li>
<li>Parameter that collects values that are not bound with any parameter (<code>-i x y ...</code>, where <code>x</code> is bound with <code>-i</code> but <code>y</code> is not).</li>
<li>Parameter that collects all unknown parameters (<code>--unknown unknown</code>, where <code>--unknown</code> is collected and <code>unknown</code> is unknown token).</li>
<li>Individual collector count limiters (e.g. no more than <code>5</code> values).</li>
</ul>
</li>
</ul>
</li>
<li>Values can be filtered by, name (e.g. <code>-i</code> as <code>i</code> and <code>--long</code> as <code>long</code>), source (e.g. <code>default</code>), priority (e.g. <code>3</code>) and index (<code>0 - n</code>).</li>
<li>Values can be counted by name, source and priority (e.g. <code>3</code>).</li>
<li>Values can be filtered as the last or the first with the highest or the lowest priority.</li>
<li>Values can be counted as the highest or the lowest priority.</li>
<li>Parameter default name that is shown in error messages (print name) can be replaced with custom string (constant or generated).</li>
<li>Auto-generated typo suggestions (e.g. Did You mean <code>--long</code> instead of <code>--song</code>?).</li>
<li>Auto-generated unknown parameter error messages.</li>
<li>Abstract format and content check functionality with auto-generated error messages.</li>
<li>Abstract parameter transformation or repair functionality.</li>
<li>Abstract Wildcard expander (can be used to make <code>-i *</code> work on Windows).<ul>
<li>Implemented wildcards for Windows file system.</li>
</ul>
</li>
<li>Abstract object parsing functionality (e.g. extract double or file).</li>
<li>Multiple parameter sets can be merged.</li>
<li>Task set, composed of multiple tasks, where from a task can be extracted by specified parameter set.</li>
<li>Auto-generated suggestions between multiple tasks for the user when it is not possible to resolve which task the user wants to perform.</li>
<li>Auto-generated suggestions how to fix the task user tries to perform.</li>
<li>Parameters can be bound with description and formatted to human readable list for help text.</li>
</ul>
<h2>Main objects</h2>
<p><a class="el" href="d3/dac/param__set_8h.html">PARAM_SET</a> contains user defined parameters that can be parsed from command line, read from configuration file or added from the code.</p>
<p><a class="el" href="da/d25/task__def_8h.html">TASK_SET</a> contains multiple task definitions (parameters that are mandatory, ignored or restricted for defined task) that can be analyzed against specified <a class="el" href="d3/dac/param__set_8h.html">PARAM_SET</a> to extract a signle consistent task that matches the input.</p>
<p><a class="el" href="da/d25/task__def_8h.html">TASK</a> is object returned by successful <a class="el" href="da/d25/task__def_8h.html">TASK_SET</a> analyze that contains the matching task <code>ID</code> and <code>PARAM_SET</code> object.</p>
<h2>Memory Management</h2>
<p>The memory management obeys the following rules:</p><ul>
<li>Every object you create, belongs to you.</li>
<li>Every object you own, must be freed by you.</li>
<li>Using free function on <code>NULL</code> does nothing and won't crash.</li>
<li>Input strings are copied and freed by parent object.</li>
</ul>
<h2>Workflow</h2>
<ul>
<li>Include <code><a class="el" href="d3/dac/param__set_8h.html">param_set.h</a></code> and <code><a class="el" href="da/d25/task__def_8h.html">task_def.h</a></code>.</li>
<li>Configure parameters:<ul>
<li>Create new <code>PARAM_SET</code> object with set of parameters <a class="el" href="d3/dac/param__set_8h.html#abcdd6577f026470b7008bb7800c6eee2">PARAM_SET_new</a>.</li>
<li>Add implementations for format, control (and convert) functions with <a class="el" href="d3/dac/param__set_8h.html#add049710f3ec97a5bd69e99acc12ce56">PARAM_SET_addControl</a>.</li>
<li>Add implementation for wildcard expander (e.g. to implement wildcards when getting file input on Windows <code>-i *.txt</code>) <a class="el" href="d3/dac/param__set_8h.html#a729d143e82192cb3acbf887993b99635">PARAM_SET_setWildcardExpander</a>.</li>
<li>Add parsing options for parameters with <a class="el" href="d3/dac/param__set_8h.html#a165b32efc042d7a54af80a4e0feaadf9">PARAM_SET_setParseOptions</a>.</li>
</ul>
</li>
<li>Configure tasks:<ul>
<li>Create new <code>TASK_SET</code> object with <a class="el" href="da/d25/task__def_8h.html#ad28393b483183f94feb94a9a3f0078fc">TASK_SET_new</a>.</li>
<li>Add task definitions to the <code>TASK_SET</code> with <a class="el" href="da/d25/task__def_8h.html#a6769d59e7199d84c72c38e92b6d52bce">TASK_SET_add</a>.</li>
</ul>
</li>
<li>Get parameters:<ul>
<li>Parse command line with <a class="el" href="d3/dac/param__set_8h.html#a1012b624c3909af521cdbe329cdcb6bd">PARAM_SET_parseCMD</a>.</li>
<li>Read parameters from configuration file with <a class="el" href="d3/dac/param__set_8h.html#ab79dcc0503fd6d25c15735f99aa7e346">PARAM_SET_readFromFile</a>.</li>
<li>Check and report user if configuration file contained some syntax errors with <a class="el" href="d3/dac/param__set_8h.html#a7672e7705c2ec78ca31dcf92e3743593">PARAM_SET_isSyntaxError</a> and <a class="el" href="d3/dac/param__set_8h.html#a70e46c8d2460fbd5db0bfcf3233d9685">PARAM_SET_syntaxErrorsToString</a>.</li>
<li>Merge different <code>PARAM_SET</code> objects with <a class="el" href="d3/dac/param__set_8h.html#a990382405a6cd70b2bf0515af32cfafc">PARAM_SET_IncludeSet</a>.</li>
<li>Check for unknown parameters and typos with <a class="el" href="d3/dac/param__set_8h.html#a53c9dadbb901faec5e6c8bf7f2ca8f5f">PARAM_SET_isUnknown</a> and <a class="el" href="d3/dac/param__set_8h.html#a5fb0a46bd3aa5c9f93e88c3180d08bc2">PARAM_SET_isTypoFailure</a>.</li>
<li>Check for invalid parameters that failed format or content checks with <a class="el" href="d3/dac/param__set_8h.html#a6a40d42c0cc6f01bc7bbc64fcb8673e4">PARAM_SET_isFormatOK</a>.</li>
<li>If there are some errors, help user with error messages by using following functions <a class="el" href="d3/dac/param__set_8h.html#afa089eb7b7a6e8edce921e018d6251eb">PARAM_SET_unknownsToString</a>, <a class="el" href="d3/dac/param__set_8h.html#a016dcef6f60ed6ebbbb0101654c6449a">PARAM_SET_typosToString</a> and <a class="el" href="d3/dac/param__set_8h.html#a1c3db575bd5d4eaf5820b89c436b98f5">PARAM_SET_invalidParametersToString</a>.</li>
</ul>
</li>
<li>Analyze task set against given input:<ul>
<li>Analyze the <code>TASK_SET</code> against <code>PARAM_SET</code> <a class="el" href="da/d25/task__def_8h.html#a8a5d2b46d997f98d5176990ddc5fe5c7">TASK_SET_analyzeConsistency</a>.</li>
<li>Extract consistent task from <code>TASK_SET</code> with <a class="el" href="da/d25/task__def_8h.html#a2e8f70039331c54bbdc9178d9703b3a5">TASK_SET_getConsistentTask</a>.</li>
<li>In case of failure, check if there is a invalid task that stands out from the others and give user some hints how to fix it with functions <a class="el" href="da/d25/task__def_8h.html#a806d15ae2741ae413ccb4b266449bd9d">TASK_SET_isOneFromSetTheTarget</a> and <a class="el" href="da/d25/task__def_8h.html#a9bbec110199b58b281b7b21432717068">TASK_SET_howToRepair_toString</a>. When it's difficult to distinguish which task user is trying to accomplish give some suggestions that have the most similar pattern to the given input with <a class="el" href="da/d25/task__def_8h.html#a2ba66047727af1d80c33e16d56355415">TASK_SET_suggestions_toString</a>.</li>
</ul>
</li>
<li>Use functions <a class="el" href="da/d25/task__def_8h.html#aeef65fea154a5298e175ea8ce0c1bef2">TASK_getID</a> and <a class="el" href="da/d25/task__def_8h.html#a9d926b9ca0f1404a3e924a7d38873802">TASK_getSet</a> and perform the selected task:<ul>
<li>To check if a parameter is set, use function <a class="el" href="d3/dac/param__set_8h.html#a1a23e9079ab47cd8ba204b7ba9ca8ef3">PARAM_SET_isSetByName</a>.</li>
<li>To get parameters value from the set, use functions <a class="el" href="d3/dac/param__set_8h.html#abc3c600a5a1bcce0637907b121ca775a">PARAM_SET_getStr</a> and <a class="el" href="d3/dac/param__set_8h.html#a1a8d1693683df08fa5d952290e707bd7">PARAM_SET_getObj</a>.</li>
<li>To get parameter value count, use function <a class="el" href="d3/dac/param__set_8h.html#a0dcc21302ad1342f39a69bf94def0739">PARAM_SET_getValueCount</a>.</li>
</ul>
</li>
<li>Release object with <a class="el" href="da/d25/task__def_8h.html#a8ae8968aac6e8656e4db2b105d6dc572">TASK_SET_free</a> and <a class="el" href="d3/dac/param__set_8h.html#ac5a858f278dc278d778cdc2d28f8646e">PARAM_SET_free</a>.</li>
</ul>
<h2>Code examples</h2>
<h3>Example 1</h3>
<p>A basic example that illustrates just how to parse the command-line options without any error handling and do the task. See <code>Example 2</code> for more advanced use case.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="d3/dac/param__set_8h.html">param_set/param_set.h</a>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv) {</div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#a8eee4562ce429d274d3bafdf0adff2f7">PARAM_SET</a> *<span class="keyword">set</span> = NULL;</div><div class="line">        <span class="keywordtype">char</span> buf[0xffff];</div><div class="line"></div><div class="line">        <span class="comment">/* Create new param_set object. */</span></div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#abcdd6577f026470b7008bb7800c6eee2">PARAM_SET_new</a>(<span class="stringliteral">&quot;{i}{o}{dump}{debug}{r}{help|h}&quot;</span>, &amp;<span class="keyword">set</span>);</div><div class="line"></div><div class="line">        <span class="comment">/* Parse command-line. */</span></div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#a1012b624c3909af521cdbe329cdcb6bd">PARAM_SET_parseCMD</a>(<span class="keyword">set</span>, argc, argv, NULL, 0);</div><div class="line"></div><div class="line">        <span class="comment">/* Document options. */</span></div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#ae611e2100e032e27ccf63a4c65fa25fc">PARAM_SET_setHelpText</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;i&quot;</span>, <span class="stringliteral">&quot;File input. To specify multiple input files, use -i multiple times.&quot;</span>);</div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#ae611e2100e032e27ccf63a4c65fa25fc">PARAM_SET_setHelpText</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;o&quot;</span>, <span class="stringliteral">&quot;Output file.&quot;</span>);</div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#ae611e2100e032e27ccf63a4c65fa25fc">PARAM_SET_setHelpText</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;r&quot;</span>, <span class="stringliteral">&quot;Reverse file.&quot;</span>);</div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#ae611e2100e032e27ccf63a4c65fa25fc">PARAM_SET_setHelpText</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;help&quot;</span>, <span class="stringliteral">&quot;Show help message (You are reading it right now!).&quot;</span>);</div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#ae611e2100e032e27ccf63a4c65fa25fc">PARAM_SET_setHelpText</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;dump&quot;</span>, <span class="stringliteral">&quot;Dump file content.&quot;</span>);</div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#ae611e2100e032e27ccf63a4c65fa25fc">PARAM_SET_setHelpText</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;debug&quot;</span>, <span class="stringliteral">&quot;Print param_set object.&quot;</span>);</div><div class="line"></div><div class="line">        <span class="comment">/*</span></div><div class="line"><span class="comment">         * See PARAM_SET_isSetByName, PARAM_SET_isOneOfSetByName, PARAM_SET_getStr,</span></div><div class="line"><span class="comment">         * PARAM_SET_getValueCount and PARAM_SET_getObj to work with parameters.</span></div><div class="line"><span class="comment">         */</span></div><div class="line">        <span class="keywordflow">if</span> (<a class="code" href="d3/dac/param__set_8h.html#a1a23e9079ab47cd8ba204b7ba9ca8ef3">PARAM_SET_isSetByName</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;h&quot;</span>)) {</div><div class="line">                printf( <span class="stringliteral">&quot;Usage:\n&quot;</span></div><div class="line">                                        <span class="stringliteral">&quot;  util -i file [-r -o file][--dump]\n&quot;</span></div><div class="line">                                        <span class="stringliteral">&quot;  util --debug\n\n&quot;</span>);</div><div class="line">                printf( <span class="stringliteral">&quot;Options:\n%s&quot;</span>, <a class="code" href="d3/dac/param__set_8h.html#ac6eea26f65c4c7e6951f6d9b24f65d52">PARAM_SET_helpToString</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;i,o,r,h,dump,debug&quot;</span>, 2, 10, 80, buf, <span class="keyword">sizeof</span>(buf)));</div><div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="d3/dac/param__set_8h.html#a1a23e9079ab47cd8ba204b7ba9ca8ef3">PARAM_SET_isSetByName</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;i,dump&quot;</span>) &amp;&amp; !<a class="code" href="d3/dac/param__set_8h.html#a1a23e9079ab47cd8ba204b7ba9ca8ef3">PARAM_SET_isSetByName</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;r,o,debug&quot;</span>)) {</div><div class="line">                printf(<span class="stringliteral">&quot;Dump File.\n&quot;</span>);</div><div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="d3/dac/param__set_8h.html#a1a23e9079ab47cd8ba204b7ba9ca8ef3">PARAM_SET_isSetByName</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;i,r,o&quot;</span>) &amp;&amp; !<a class="code" href="d3/dac/param__set_8h.html#a1a23e9079ab47cd8ba204b7ba9ca8ef3">PARAM_SET_isSetByName</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;debug&quot;</span>)) {</div><div class="line">                printf(<span class="stringliteral">&quot;Reverse File.\n&quot;</span>);</div><div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="d3/dac/param__set_8h.html#a1a23e9079ab47cd8ba204b7ba9ca8ef3">PARAM_SET_isSetByName</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;debug&quot;</span>)) {</div><div class="line">                printf(<span class="stringliteral">&quot;Debug information:\n%s\n&quot;</span>, <a class="code" href="d3/dac/param__set_8h.html#a802aec29dc4b7fab5a9a92d7289db3d7">PARAM_SET_toString</a>(<span class="keyword">set</span>, buf, <span class="keyword">sizeof</span>(buf)));</div><div class="line">        } <span class="keywordflow">else</span> {</div><div class="line">                printf(<span class="stringliteral">&quot;Unknown task. Use -h to get some help.\n&quot;</span>);</div><div class="line">        }</div><div class="line"></div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#ac5a858f278dc278d778cdc2d28f8646e">PARAM_SET_free</a>(<span class="keyword">set</span>);</div><div class="line">}</div></div><!-- fragment --><h3>Example 2</h3>
<p>A simple example of a command-line tool that uses <code>libparamset</code> to specify parameter set and task set, parse the command line, handle errors and give some feedback to help get things working.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="d3/dac/param__set_8h.html">param_set/param_set.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="da/d25/task__def_8h.html">param_set/task_def.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef _WIN32</span></div><div class="line"><span class="preprocessor">#   include &lt;<a class="code" href="df/dae/wildcardexpanders_8h.html">param_set/wildcardexpanders.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line"><span class="keyword">enum</span> {</div><div class="line">        VALUE_OK = 0,</div><div class="line">        VALUE_IS_NULL = 0x01,</div><div class="line">        VALUE_IS_EMPTY = 0x02,</div><div class="line">        VALUE_FILE_DOES_NOT_EXIST = 0x03,</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> convertRepair_path(<span class="keyword">const</span> <span class="keywordtype">char</span>* arg, <span class="keywordtype">char</span>* buf, <span class="keywordtype">unsigned</span> len);</div><div class="line"><span class="keywordtype">int</span> isContentOk_path(<span class="keyword">const</span> <span class="keywordtype">char</span>* fname);</div><div class="line"><span class="keywordtype">int</span> isFormatOk_path(<span class="keyword">const</span> <span class="keywordtype">char</span>* fname);</div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *parameter_error_to_string(<span class="keywordtype">int</span> err);</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv, <span class="keywordtype">char</span> **envp) {</div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#a8eee4562ce429d274d3bafdf0adff2f7">PARAM_SET</a> *<span class="keyword">set</span> = NULL;</div><div class="line">        <a class="code" href="da/d25/task__def_8h.html#a8ba2b8bd540a59bf710ec927ec1c2b25">TASK_SET</a> *task_set = NULL;</div><div class="line">        <a class="code" href="da/d25/task__def_8h.html#a54751d383c2ea26ffb13a44f0ed879db">TASK</a> *pTask = NULL;</div><div class="line">        <span class="keywordtype">char</span> buf[1024];</div><div class="line">        <span class="keywordtype">char</span> debug[0xffff];</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">/*</span></div><div class="line"><span class="comment">         * Configure parameter set and its parameters.</span></div><div class="line"><span class="comment">         * 1) Both o and i must not be NULL or empty string.</span></div><div class="line"><span class="comment">         * 2) Both o and i converts &#39;\&#39; into &#39;/&#39;.</span></div><div class="line"><span class="comment">         * 3) i must be a path to a file that must exist.</span></div><div class="line"><span class="comment">         * 4) Next token after o and i is always bound with the flag.</span></div><div class="line"><span class="comment">         * 5) All options with true or false do not bound anything.</span></div><div class="line"><span class="comment">         */</span></div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#abcdd6577f026470b7008bb7800c6eee2">PARAM_SET_new</a>(<span class="stringliteral">&quot;{i}{o}{dump}{debug}{r}{help|h}&quot;</span>, &amp;<span class="keyword">set</span>);</div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#add049710f3ec97a5bd69e99acc12ce56">PARAM_SET_addControl</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;o&quot;</span>, isFormatOk_path, NULL, convertRepair_path, NULL);</div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#add049710f3ec97a5bd69e99acc12ce56">PARAM_SET_addControl</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;i&quot;</span>, isFormatOk_path, isContentOk_path, convertRepair_path, NULL);</div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#a165b32efc042d7a54af80a4e0feaadf9">PARAM_SET_setParseOptions</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;o&quot;</span>, <a class="code" href="d2/d2a/parameter_8h.html#a73686d434103a25a3125fd4abf5077e6ae3552dc640484eea3c6e152f3d84e14e">PST_PRSCMD_HAS_VALUE</a>);</div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#a165b32efc042d7a54af80a4e0feaadf9">PARAM_SET_setParseOptions</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;dump,debug,h,r&quot;</span>, <a class="code" href="d2/d2a/parameter_8h.html#a73686d434103a25a3125fd4abf5077e6a6e05bfab671d5d33a2d441fe3ed02303">PST_PRSCMD_HAS_NO_VALUE</a>);</div><div class="line"></div><div class="line">        <span class="comment">/* Document options. */</span></div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#ae611e2100e032e27ccf63a4c65fa25fc">PARAM_SET_setHelpText</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;i&quot;</span>, <span class="stringliteral">&quot;File input. To specify multiple input files, use -i multiple times or use wildcards.&quot;</span>);</div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#ae611e2100e032e27ccf63a4c65fa25fc">PARAM_SET_setHelpText</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;o&quot;</span>, <span class="stringliteral">&quot;Output file.&quot;</span>);</div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#ae611e2100e032e27ccf63a4c65fa25fc">PARAM_SET_setHelpText</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;r&quot;</span>, <span class="stringliteral">&quot;Reverse file.&quot;</span>);</div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#ae611e2100e032e27ccf63a4c65fa25fc">PARAM_SET_setHelpText</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;help&quot;</span>, <span class="stringliteral">&quot;Show help message (You are reading it right now!).&quot;</span>);</div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#ae611e2100e032e27ccf63a4c65fa25fc">PARAM_SET_setHelpText</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;dump&quot;</span>, <span class="stringliteral">&quot;Dump file content.&quot;</span>);</div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#ae611e2100e032e27ccf63a4c65fa25fc">PARAM_SET_setHelpText</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;debug&quot;</span>, <span class="stringliteral">&quot;Print param_setobject.&quot;</span>);</div><div class="line"></div><div class="line">        <span class="comment">/*</span></div><div class="line"><span class="comment">         * To enable Windows file system wildcards, specify the wildcard expander</span></div><div class="line"><span class="comment">         * function implementation and enable parsing option that enable wildcard</span></div><div class="line"><span class="comment">         * processor.</span></div><div class="line"><span class="comment">         */</span></div><div class="line"><span class="preprocessor">#ifdef _WIN32</span></div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#a729d143e82192cb3acbf887993b99635">PARAM_SET_setWildcardExpander</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;i&quot;</span>, NULL, NULL, NULL, <a class="code" href="df/dae/wildcardexpanders_8h.html#aeea91a6a421dd575ec82e1c755642b12">PST_WCF_Win32FileWildcard</a>);</div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#a165b32efc042d7a54af80a4e0feaadf9">PARAM_SET_setParseOptions</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;i&quot;</span>, <a class="code" href="d2/d2a/parameter_8h.html#a73686d434103a25a3125fd4abf5077e6ae3552dc640484eea3c6e152f3d84e14e">PST_PRSCMD_HAS_VALUE</a> |  <a class="code" href="d2/d2a/parameter_8h.html#a73686d434103a25a3125fd4abf5077e6ae6f2365945e05ffb44173311a23d3b8e">PST_PRSCMD_EXPAND_WILDCARD</a>);</div><div class="line"><span class="preprocessor">#else</span></div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#a165b32efc042d7a54af80a4e0feaadf9">PARAM_SET_setParseOptions</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;i&quot;</span>, <a class="code" href="d2/d2a/parameter_8h.html#a73686d434103a25a3125fd4abf5077e6ae3552dc640484eea3c6e152f3d84e14e">PST_PRSCMD_HAS_VALUE</a>);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">        <span class="comment">/*</span></div><div class="line"><span class="comment">         * Describe different tasks:</span></div><div class="line"><span class="comment">         * util -h</span></div><div class="line"><span class="comment">         * util -i file_in --dump</span></div><div class="line"><span class="comment">         * util -i file_in -o file_out -r</span></div><div class="line"><span class="comment">         * util --debug [options, except -h]</span></div><div class="line"><span class="comment">         */</span></div><div class="line">        <a class="code" href="da/d25/task__def_8h.html#ad28393b483183f94feb94a9a3f0078fc">TASK_SET_new</a>(&amp;task_set);</div><div class="line">        <a class="code" href="da/d25/task__def_8h.html#a6769d59e7199d84c72c38e92b6d52bce">TASK_SET_add</a>(task_set, 0, <span class="stringliteral">&quot;Help&quot;</span>,                       <span class="stringliteral">&quot;h&quot;</span>,            NULL, NULL,                     NULL);</div><div class="line">        <a class="code" href="da/d25/task__def_8h.html#a6769d59e7199d84c72c38e92b6d52bce">TASK_SET_add</a>(task_set, 1, <span class="stringliteral">&quot;Only Dump file&quot;</span>,     <span class="stringliteral">&quot;i,dump&quot;</span>,       NULL, <span class="stringliteral">&quot;h,r,o,debug&quot;</span>,NULL);</div><div class="line">        <a class="code" href="da/d25/task__def_8h.html#a6769d59e7199d84c72c38e92b6d52bce">TASK_SET_add</a>(task_set, 2, <span class="stringliteral">&quot;Reverse file&quot;</span>,       <span class="stringliteral">&quot;i,r,o&quot;</span>,        NULL, <span class="stringliteral">&quot;h,debug&quot;</span>,        NULL);</div><div class="line">        <a class="code" href="da/d25/task__def_8h.html#a6769d59e7199d84c72c38e92b6d52bce">TASK_SET_add</a>(task_set, 3, <span class="stringliteral">&quot;Debug&quot;</span>,                      <span class="stringliteral">&quot;debug&quot;</span>,        NULL, <span class="stringliteral">&quot;h&quot;</span>,                      NULL);</div><div class="line"></div><div class="line">        <span class="comment">/* Parse command-line. */</span></div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#a1012b624c3909af521cdbe329cdcb6bd">PARAM_SET_parseCMD</a>(<span class="keyword">set</span>, argc, argv, NULL, 0);</div><div class="line"></div><div class="line">        <span class="comment">/* Check for typos and unknown parameters. */</span></div><div class="line">        <span class="keywordflow">if</span> (<a class="code" href="d3/dac/param__set_8h.html#a5fb0a46bd3aa5c9f93e88c3180d08bc2">PARAM_SET_isTypoFailure</a>(<span class="keyword">set</span>)) {</div><div class="line">                        printf(<span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="d3/dac/param__set_8h.html#a016dcef6f60ed6ebbbb0101654c6449a">PARAM_SET_typosToString</a>(<span class="keyword">set</span>, NULL, buf, <span class="keyword">sizeof</span>(buf)));</div><div class="line">                        <span class="keywordflow">goto</span> cleanup;</div><div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="d3/dac/param__set_8h.html#a53c9dadbb901faec5e6c8bf7f2ca8f5f">PARAM_SET_isUnknown</a>(<span class="keyword">set</span>)){</div><div class="line">                        printf(<span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="d3/dac/param__set_8h.html#afa089eb7b7a6e8edce921e018d6251eb">PARAM_SET_unknownsToString</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;Error: &quot;</span>, buf, <span class="keyword">sizeof</span>(buf)));</div><div class="line">                        <span class="keywordflow">goto</span> cleanup;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* Check for invalid values. */</span></div><div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="d3/dac/param__set_8h.html#a6a40d42c0cc6f01bc7bbc64fcb8673e4">PARAM_SET_isFormatOK</a>(<span class="keyword">set</span>)) {</div><div class="line">                printf(<span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="d3/dac/param__set_8h.html#a1c3db575bd5d4eaf5820b89c436b98f5">PARAM_SET_invalidParametersToString</a>(<span class="keyword">set</span>, NULL, parameter_error_to_string, buf, <span class="keyword">sizeof</span>(buf)));</div><div class="line">                <span class="keywordflow">goto</span> cleanup;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* As input parameter passed all checks try to extract a consistent task. */</span></div><div class="line">        <a class="code" href="da/d25/task__def_8h.html#a8a5d2b46d997f98d5176990ddc5fe5c7">TASK_SET_analyzeConsistency</a>(task_set, <span class="keyword">set</span>, 0.2);</div><div class="line">        <a class="code" href="da/d25/task__def_8h.html#a2e8f70039331c54bbdc9178d9703b3a5">TASK_SET_getConsistentTask</a>(task_set, &amp;pTask);</div><div class="line"></div><div class="line">        <span class="comment">/* If task is not extracted try to give user some suggestions what to do to make things work. */</span></div><div class="line">        <span class="keywordflow">if</span> (pTask == NULL) {</div><div class="line">                <span class="keywordtype">int</span> ID;</div><div class="line">                <span class="keywordflow">if</span> (<a class="code" href="da/d25/task__def_8h.html#a806d15ae2741ae413ccb4b266449bd9d">TASK_SET_isOneFromSetTheTarget</a>(task_set, 0.1, &amp;ID)) {</div><div class="line">                        printf(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="da/d25/task__def_8h.html#a9bbec110199b58b281b7b21432717068">TASK_SET_howToRepair_toString</a>(task_set, <span class="keyword">set</span>, ID, NULL, buf, <span class="keyword">sizeof</span>(buf)));</div><div class="line">                } <span class="keywordflow">else</span> {</div><div class="line">                        printf(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="da/d25/task__def_8h.html#a2ba66047727af1d80c33e16d56355415">TASK_SET_suggestions_toString</a>(task_set, 3, buf, <span class="keyword">sizeof</span>(buf)));</div><div class="line">                }</div><div class="line"></div><div class="line">                <span class="keywordflow">goto</span> cleanup;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/*</span></div><div class="line"><span class="comment">         * Task is extracted, check which one to run.</span></div><div class="line"><span class="comment">         * See PARAM_SET_isSetByName, PARAM_SET_isOneOfSetByName, PARAM_SET_getStr,</span></div><div class="line"><span class="comment">         * PARAM_SET_getValueCount and PARAM_SET_getObj to work with parameters.</span></div><div class="line"><span class="comment">         */</span></div><div class="line">        <span class="keywordflow">switch</span>(<a class="code" href="da/d25/task__def_8h.html#aeef65fea154a5298e175ea8ce0c1bef2">TASK_getID</a>(pTask)) {</div><div class="line">                <span class="keywordflow">case</span> 0:</div><div class="line">                        printf( <span class="stringliteral">&quot;Usage:\n&quot;</span></div><div class="line">                                        <span class="stringliteral">&quot;  util -i file [-r -o file][--dump]\n&quot;</span></div><div class="line">                                        <span class="stringliteral">&quot;  util --debug\n\n&quot;</span>);</div><div class="line">                        printf( <span class="stringliteral">&quot;Options:\n%s&quot;</span>, <a class="code" href="d3/dac/param__set_8h.html#ac6eea26f65c4c7e6951f6d9b24f65d52">PARAM_SET_helpToString</a>(<span class="keyword">set</span>, <span class="stringliteral">&quot;i,o,r,h,dump,debug&quot;</span>, 2, 10, 80, buf, <span class="keyword">sizeof</span>(buf)));</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> 1:</div><div class="line">                        printf(<span class="stringliteral">&quot;Dump File.\n&quot;</span>);</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> 2:</div><div class="line">                        printf(<span class="stringliteral">&quot;Reverse File.\n&quot;</span>);</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> 3:</div><div class="line">                        printf(<span class="stringliteral">&quot;Debug information:\n%s\n&quot;</span>, <a class="code" href="d3/dac/param__set_8h.html#a802aec29dc4b7fab5a9a92d7289db3d7">PARAM_SET_toString</a>(<span class="keyword">set</span>, debug, <span class="keyword">sizeof</span>(debug)));</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">default</span>:</div><div class="line">                        printf(<span class="stringliteral">&quot;Error.\n&quot;</span>);</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">cleanup:</div><div class="line">        <a class="code" href="da/d25/task__def_8h.html#a8ae8968aac6e8656e4db2b105d6dc572">TASK_SET_free</a>(task_set);</div><div class="line">        <a class="code" href="d3/dac/param__set_8h.html#ac5a858f278dc278d778cdc2d28f8646e">PARAM_SET_free</a>(<span class="keyword">set</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *parameter_error_to_string(<span class="keywordtype">int</span> err) {</div><div class="line">        <span class="keywordflow">switch</span>(err) {</div><div class="line">                <span class="keywordflow">case</span> VALUE_OK: <span class="keywordflow">return</span> <span class="stringliteral">&quot;OK&quot;</span>;</div><div class="line">                <span class="keywordflow">case</span> VALUE_IS_NULL: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Parameter must have value&quot;</span>;</div><div class="line">                <span class="keywordflow">case</span> VALUE_IS_EMPTY: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Parameter must have content&quot;</span>;</div><div class="line">                <span class="keywordflow">case</span> VALUE_FILE_DOES_NOT_EXIST: <span class="keywordflow">return</span> <span class="stringliteral">&quot;File does not exist&quot;</span>;</div><div class="line">                <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unknown error&quot;</span>;</div><div class="line">        }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> isFormatOk_path(<span class="keyword">const</span> <span class="keywordtype">char</span>* fname) {</div><div class="line">        <span class="keywordflow">if</span> (fname == NULL) <span class="keywordflow">return</span> VALUE_IS_NULL;</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*fname == <span class="charliteral">&#39;\0&#39;</span>);</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">return</span> VALUE_OK;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> isContentOk_path(<span class="keyword">const</span> <span class="keywordtype">char</span>* fname) {</div><div class="line">        <span class="keywordtype">int</span> result = 1;</div><div class="line">        FILE *f = NULL;</div><div class="line">        f = fopen(fname, <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line">        result = f == NULL ? VALUE_FILE_DOES_NOT_EXIST : 0;</div><div class="line">        <span class="keywordflow">if</span> (f != NULL) fclose(f);</div><div class="line">        <span class="keywordflow">return</span> result;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> convertRepair_path(<span class="keyword">const</span> <span class="keywordtype">char</span>* arg, <span class="keywordtype">char</span>* buf, <span class="keywordtype">unsigned</span> len){</div><div class="line">        <span class="keywordtype">char</span> *toBeReplaced = NULL;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (arg == NULL || buf == NULL) <span class="keywordflow">return</span> <a class="code" href="d3/dac/param__set_8h.html#af0949771827d4ad55e9c23b5dae45508a0fdd6cc1b9438e3deafd78b5acfba0c5">PST_INVALID_ARGUMENT</a>;</div><div class="line">        strncpy(buf, arg, len - 1);</div><div class="line"></div><div class="line"></div><div class="line">        toBeReplaced = buf;</div><div class="line">        <span class="keywordflow">while</span> ((toBeReplaced = strchr(toBeReplaced, <span class="charliteral">&#39;\\&#39;</span>)) != NULL){</div><div class="line">                *toBeReplaced = <span class="charliteral">&#39;/&#39;</span>;</div><div class="line">                toBeReplaced++;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="d3/dac/param__set_8h.html#af0949771827d4ad55e9c23b5dae45508a0e0dd63007d89ba4959b0291206d075c">PST_OK</a>;</div><div class="line">}</div></div><!-- fragment --><h2>Third party components</h2>
<p>The SDK is using the following third party components:</p><ul>
<li>CuTest <a href="http://cutest.sourceforge.net/">cutest.sourceforge.net</a> </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
